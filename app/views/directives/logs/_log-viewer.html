<div class="log-header" ng-if="!chromeless">
  <div ng-transclude class="log-status"><!-- expect start time, end time, status details --></div>
  <div class="log-actions">
    <span
        extension-point
        extension-name="log-links"
        extension-types="link dom"
        extension-args="[object, options]"></span>
    <span ng-if="kibanaArchiveUrl">
      <a href="{{kibanaArchiveUrl}}">查看档案</a>
      <span ng-if="state && state !== 'empty'" class="action-divider">|</span>
    </span>
    <span ng-if="canSave && state && state !== 'empty'">
      <a href=""
         ng-click="saveLog()"
         role="button">
         保存
         <i class="fa fa-download"></i></a>
      <span ng-if="state && state !== 'empty'" class="action-divider">|</span>
    </span>
    <a ng-if="state && state !== 'empty'"
       href=""
       ng-click="goChromeless(options, fullLogUrl)"
       role="button">
       展开
       <i class="fa fa-external-link"></i></a>
  </div>
</div>

<div ng-if="largeLog" class="alert alert-info log-size-warning">
  <span class="pficon pficon-info" aria-hidden="true"></span>
  由于日志大小较大，将只显示前{{options.tailLines || 5000}}行日志和新的日志消息。
</div>


<!-- show this message until the log viewer starts. important for pending state, etc -->
<div ng-if="(!state)">
  <ellipsis-pulser ng-if="!chromeless" color="dark" size="sm" display="inline" msg="Loading log" class="log-pending-ellipsis"></ellipsis-pulser>
  <ellipsis-pulser ng-if="chromeless" color="light" size="sm" display="inline" msg="Loading log" class="log-pending-ellipsis"></ellipsis-pulser>
</div>

<div class="empty-state-message text-center" ng-if="state=='empty'" ng-class="{'log-fixed-height': fixedHeight}">
  <h2>日志不可用。</h2>

  <p>
    {{emptyStateMessage}}
  </p>

  <div ng-if="kibanaArchiveUrl">
    <a href="{{kibanaArchiveUrl}}">查看档案</a>
  </div>
</div>


<!-- must be ng-show rather than ng-if, else DOM is not rendered in time to cache nodes -->
<!-- Keep invisible until sized to avoid flicker on initial display. -->
<div ng-show="state=='logs'" ng-class="{ invisible: !sized }">
  <div class="log-view" ng-attr-id="{{logViewerID}}" ng-class="{'log-fixed-height': fixedHeight}">
    <div
      id="{{logViewerID}}-affixedFollow"
      class="log-scroll log-scroll-top">
      <a ng-if="loading" href="" ng-click="toggleAutoScroll()">
        <span ng-if="!autoScrollActive">跟踪</span>
        <span ng-if="autoScrollActive">停止跟踪</span>
      </a>
      <a ng-if="!loading" href="" ng-show="showScrollLinks" ng-click="onScrollBottom()">
        到日志底部
      </a>
    </div>
    <div class="log-view-output" id="{{logViewerID}}-fixed-scrollable">
      <table>
        <tbody id="{{logViewerID}}-logContent"></tbody>
      </table>
      <div ng-if="(!loading) && (!limitReached) && (!errorWhileRunning) && state=='logs'" class="log-end-msg">
        日志底部
      </div>
    </div>
    <!-- show if logs are still streaming -->
    <ellipsis-pulser color="light" size="md" ng-show="loading"></ellipsis-pulser>
    <div
      ng-show="showScrollLinks"
      class="log-scroll log-scroll-bottom">
      <a href="" ng-click="onScrollTop()">返回顶部</a>
    </div>
  </div>
</div>

<!-- Show a different messsage if the log might have stopped because we reached the byte limit -->
<div ng-if="limitReached" class="text-muted">
  已达到web控制台日志的最大大小。使用命令行界面或<a href="" ng-click="restartLogs()">重新加载</a>日志以查看新消息。
</div>


<div ng-if="errorWhileRunning" class="text-muted">
  载入日志时发生错误。
  <a href="" ng-click="restartLogs()">重新加载</a>
</div>
